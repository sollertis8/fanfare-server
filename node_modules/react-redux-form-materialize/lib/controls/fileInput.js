'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _omit = require('lodash/omit');

var _omit2 = _interopRequireDefault(_omit);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class FileInput extends _react2.default.Component {
  constructor(...args) {
    var _temp;

    return _temp = super(...args), this.onFileClick = () => this.props.onChange(null), _temp;
  }

  render() {
    const { props } = this;

    const inputValue = props.innerState.value && props.innerState.value.length ? props.innerState.value.reduce((prevVal, curVal) => prevVal.concat(curVal.name, ', '), []) : [];

    if (inputValue.length) {
      inputValue.pop();
    }

    const fieldClass = (0, _classnames2.default)('file-field', 'input-field', props.className);

    const btnClassName = (0, _classnames2.default)('btn', {
      disabled: props.disabled
    });

    const textInputClassName = (0, _classnames2.default)('file-path', 'validate', {
      [props.textClassName]: props.textClassName
    });

    const inputProps = (0, _omit2.default)(props, ['placeholder', 'innerState', 'textClassName', 'messages', 'buttonText', 'onFileClick', 'className']);

    return _react2.default.createElement(
      'div',
      { className: fieldClass },
      _react2.default.createElement(
        'div',
        { className: btnClassName },
        _react2.default.createElement(
          'span',
          null,
          props.buttonText
        ),
        _react2.default.createElement('input', (0, _extends3.default)({}, inputProps, { onClick: this.onFileClick, type: 'file' }))
      ),
      _react2.default.createElement(
        'div',
        { className: 'file-path-wrapper' },
        _react2.default.createElement('input', { disabled: props.disabled, value: inputValue.join(''), className: textInputClassName, type: 'text',
          readOnly: true, placeholder: props.placeholder })
      )
    );
  }
}
exports.default = FileInput;
FileInput.propTypes = {
  innerState: _propTypes2.default.object.isRequired
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9scy9maWxlSW5wdXQuanMiXSwibmFtZXMiOlsiRmlsZUlucHV0IiwiQ29tcG9uZW50Iiwib25GaWxlQ2xpY2siLCJwcm9wcyIsIm9uQ2hhbmdlIiwicmVuZGVyIiwiaW5wdXRWYWx1ZSIsImlubmVyU3RhdGUiLCJ2YWx1ZSIsImxlbmd0aCIsInJlZHVjZSIsInByZXZWYWwiLCJjdXJWYWwiLCJjb25jYXQiLCJuYW1lIiwicG9wIiwiZmllbGRDbGFzcyIsImNsYXNzTmFtZSIsImJ0bkNsYXNzTmFtZSIsImRpc2FibGVkIiwidGV4dElucHV0Q2xhc3NOYW1lIiwidGV4dENsYXNzTmFtZSIsImlucHV0UHJvcHMiLCJidXR0b25UZXh0Iiwiam9pbiIsInBsYWNlaG9sZGVyIiwicHJvcFR5cGVzIiwib2JqZWN0IiwiaXNSZXF1aXJlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFZSxNQUFNQSxTQUFOLFNBQXdCLGdCQUFNQyxTQUE5QixDQUF3QztBQUFBO0FBQUE7O0FBQUEsd0NBS3JEQyxXQUxxRCxHQUt2QyxNQUFNLEtBQUtDLEtBQUwsQ0FBV0MsUUFBWCxDQUFvQixJQUFwQixDQUxpQztBQUFBOztBQU9yREMsV0FBUztBQUNQLFVBQU0sRUFBRUYsS0FBRixLQUFZLElBQWxCOztBQUVBLFVBQU1HLGFBQWNILE1BQU1JLFVBQU4sQ0FBaUJDLEtBQWpCLElBQTBCTCxNQUFNSSxVQUFOLENBQWlCQyxLQUFqQixDQUF1QkMsTUFBbEQsR0FDZk4sTUFBTUksVUFBTixDQUFpQkMsS0FBakIsQ0FBdUJFLE1BQXZCLENBQThCLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQkQsUUFBUUUsTUFBUixDQUFlRCxPQUFPRSxJQUF0QixFQUE0QixJQUE1QixDQUFuRCxFQUFzRixFQUF0RixDQURlLEdBRWYsRUFGSjs7QUFJQSxRQUFJUixXQUFXRyxNQUFmLEVBQXVCO0FBQ3JCSCxpQkFBV1MsR0FBWDtBQUNEOztBQUVELFVBQU1DLGFBQWEsMEJBQUcsWUFBSCxFQUFpQixhQUFqQixFQUFnQ2IsTUFBTWMsU0FBdEMsQ0FBbkI7O0FBRUEsVUFBTUMsZUFBZSwwQkFBRyxLQUFILEVBQVU7QUFDN0JDLGdCQUFVaEIsTUFBTWdCO0FBRGEsS0FBVixDQUFyQjs7QUFJQSxVQUFNQyxxQkFBcUIsMEJBQUcsV0FBSCxFQUFnQixVQUFoQixFQUE0QjtBQUNyRCxPQUFDakIsTUFBTWtCLGFBQVAsR0FBdUJsQixNQUFNa0I7QUFEd0IsS0FBNUIsQ0FBM0I7O0FBSUEsVUFBTUMsYUFBYSxvQkFBS25CLEtBQUwsRUFBWSxDQUFDLGFBQUQsRUFBZ0IsWUFBaEIsRUFBOEIsZUFBOUIsRUFBK0MsVUFBL0MsRUFBMkQsWUFBM0QsRUFBeUUsYUFBekUsRUFBd0YsV0FBeEYsQ0FBWixDQUFuQjs7QUFFQSxXQUNFO0FBQUE7QUFBQSxRQUFLLFdBQVdhLFVBQWhCO0FBQ0U7QUFBQTtBQUFBLFVBQUssV0FBV0UsWUFBaEI7QUFDRTtBQUFBO0FBQUE7QUFBT2YsZ0JBQU1vQjtBQUFiLFNBREY7QUFFRSwwRUFBV0QsVUFBWCxJQUF1QixTQUFTLEtBQUtwQixXQUFyQyxFQUFrRCxNQUFLLE1BQXZEO0FBRkYsT0FERjtBQUtFO0FBQUE7QUFBQSxVQUFLLFdBQVUsbUJBQWY7QUFDRSxpREFBTyxVQUFVQyxNQUFNZ0IsUUFBdkIsRUFBaUMsT0FBT2IsV0FBV2tCLElBQVgsQ0FBZ0IsRUFBaEIsQ0FBeEMsRUFBNkQsV0FBV0osa0JBQXhFLEVBQTRGLE1BQUssTUFBakc7QUFDTyxvQkFBVSxJQURqQixFQUN1QixhQUFhakIsTUFBTXNCLFdBRDFDO0FBREY7QUFMRixLQURGO0FBWUQ7QUExQ29EO2tCQUFsQ3pCLFM7QUFBQUEsUyxDQUNaMEIsUyxHQUFZO0FBQ2pCbkIsY0FBWSxvQkFBVW9CLE1BQVYsQ0FBaUJDO0FBRFosQyIsImZpbGUiOiJmaWxlSW5wdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjbiBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBvbWl0IGZyb20gJ2xvZGFzaC9vbWl0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUlucHV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBpbm5lclN0YXRlOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gIH07XG5cbiAgb25GaWxlQ2xpY2sgPSAoKSA9PiB0aGlzLnByb3BzLm9uQ2hhbmdlKG51bGwpO1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xuXG4gICAgY29uc3QgaW5wdXRWYWx1ZSA9IChwcm9wcy5pbm5lclN0YXRlLnZhbHVlICYmIHByb3BzLmlubmVyU3RhdGUudmFsdWUubGVuZ3RoKVxuICAgICAgPyBwcm9wcy5pbm5lclN0YXRlLnZhbHVlLnJlZHVjZSgocHJldlZhbCwgY3VyVmFsKSA9PiBwcmV2VmFsLmNvbmNhdChjdXJWYWwubmFtZSwgJywgJyksIFtdKVxuICAgICAgOiBbXTtcblxuICAgIGlmIChpbnB1dFZhbHVlLmxlbmd0aCkge1xuICAgICAgaW5wdXRWYWx1ZS5wb3AoKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWVsZENsYXNzID0gY24oJ2ZpbGUtZmllbGQnLCAnaW5wdXQtZmllbGQnLCBwcm9wcy5jbGFzc05hbWUpO1xuXG4gICAgY29uc3QgYnRuQ2xhc3NOYW1lID0gY24oJ2J0bicsIHtcbiAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHRleHRJbnB1dENsYXNzTmFtZSA9IGNuKCdmaWxlLXBhdGgnLCAndmFsaWRhdGUnLCB7XG4gICAgICBbcHJvcHMudGV4dENsYXNzTmFtZV06IHByb3BzLnRleHRDbGFzc05hbWUsXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbnB1dFByb3BzID0gb21pdChwcm9wcywgWydwbGFjZWhvbGRlcicsICdpbm5lclN0YXRlJywgJ3RleHRDbGFzc05hbWUnLCAnbWVzc2FnZXMnLCAnYnV0dG9uVGV4dCcsICdvbkZpbGVDbGljaycsICdjbGFzc05hbWUnXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2ZpZWxkQ2xhc3N9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YnRuQ2xhc3NOYW1lfT5cbiAgICAgICAgICA8c3Bhbj57cHJvcHMuYnV0dG9uVGV4dH08L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHsuLi5pbnB1dFByb3BzfSBvbkNsaWNrPXt0aGlzLm9uRmlsZUNsaWNrfSB0eXBlPVwiZmlsZVwiLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS1wYXRoLXdyYXBwZXJcIj5cbiAgICAgICAgICA8aW5wdXQgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfSB2YWx1ZT17aW5wdXRWYWx1ZS5qb2luKCcnKX0gY2xhc3NOYW1lPXt0ZXh0SW5wdXRDbGFzc05hbWV9IHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgcmVhZE9ubHk9e3RydWV9IHBsYWNlaG9sZGVyPXtwcm9wcy5wbGFjZWhvbGRlcn0vPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiJdfQ==